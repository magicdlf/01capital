# 密码管理工具使用说明

## 简化后的工作流程

### 1. 密码重置流程
1. **管理员**：使用管理工具生成邀请链接
   - 访问 `http://localhost:8800/tools/hash-manager.html`
   - 在"密码重置邀请链接生成"中输入用户名
   - 点击"生成邀请链接"
   - 复制链接发送给用户

2. **用户**：通过邀请链接重置密码
   - 点击管理员发送的链接（如：`http://localhost:8800/reset_pas.html?user=miao`）
   - 输入新密码并确认
   - 生成Hash值并复制
   - 将Hash值告知管理员

3. **管理员**：更新系统
   - 手动编辑 `data/password.csv` 文件
   - 将用户的新Hash值更新到对应行
   - 运行 `python3 json_upload.py` 自动处理数据迁移

### 2. 管理员工具功能

#### 保留的功能：
- ✅ **生成邀请链接**：为用户生成密码重置邀请链接
- ✅ **预览用户数据**：查看用户当前的投资数据
- ✅ **生成Hash值**：为新用户或测试生成Hash值
- ✅ **文件列表**：查看所有现有的用户文件

#### 移除的功能：
- ❌ **处理密码修改**：不再需要复杂的密码修改处理功能

### 3. 日常数据更新

每天运行以下命令更新用户数据：
```bash
cd fof-info
python3 json_upload.py
```

脚本会自动：
- 从 `password.csv` 读取用户名-Hash映射
- 根据用户名匹配对应的Hash值
- 更新所有用户的投资数据文件

### 4. 优势

- **更简单**：管理员只需要编辑CSV文件和运行脚本
- **更安全**：不存储明文密码，只保存Hash值
- **更可靠**：通过脚本自动处理数据迁移，减少人为错误
- **更高效**：日常操作更加简单快捷

## 文件结构

```
fof-info/
├── data/
│   ├── password.csv          # 用户名-Hash映射文件
│   └── users/               # 用户数据文件目录
│       ├── *.json           # 用户投资数据文件
├── tools/
│   ├── hash-manager.html    # 管理员工具
│   └── README.md           # 本说明文档
├── reset_pas.html          # 密码重置页面
└── json_upload.py          # 数据更新脚本
```